<!DOCTYPE html>
<html lang="en">
<head>
  <title>BPNAF</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<style>
	a {text-decoration:none;}
	h3
	{
	 color: #20385a !important;
	 background: #fff;
	 text-align:center;
	}
	.sep{
	    height: 1px;
	    width: 90%;
	    display: inline-block;
	    text-align: right;
	    background: #f07e00;
	    vertical-align: middle;
	}

	[class*="col-"] {
	  margin-bottom: 18px;
	  margin-left: -2px;
	  margin-right: -2px;
	}

	.content {
	  padding: 12px 16px 12px 16px;
	  margin: 6px 0px 6px 0px;
	  background-color: white;
	  border-radius: .6rem;
	}

	.h-100 {height:100%;}

</style>

<script src="bpnaf.js"></script>
<script>
	function main() {
		var el=document.getElementById("ex6");
		if(el && typeof example6 !== 'undefined') el.value=example6;
	}
</script>	
</head>

<body onload="main();" style="background-color:#eee">

<div class="container">
	
<center><h2><a href="bpnaf5.html">Business Process Nature Assessment Framework</a></h2></center>

<p>The Business Process Nature Assessment Framework (BPNAF)  enables the quick and efficient assessment of the nature of business processes in an organization in terms of their unpredictability and knowledge intensity. The presentation of the results enables the objective recommendation of the selection of implementation methodologies, HRM policies, or IT systems supporting BPM in line with the real nature of business processes implemented in the organization, in a way that is understandable to both experts and non-experts.
<p>This framework interface supports <a href="bpnaf5.html?lang=en">English</a>, <a href="bpnaf5.html">Polish</a> (default), <a href="bpnaf5.html?lang=es">Spanish</a> and <a href="bpnaf5.html?lang=de">German</a>.  It contains: (1) questionnaire generator for dedicated company and evaluating person, (2) system for completing the questionnaire, (3) server-side and local-side questionnaire management including importing the results from prioprietary files and report genaration. Generated report contains process map and results matrix (BPNAM) in a form of two charts. As a starting point you can go through several examples available below.
<p>The method overview can be found in <i>Marek Szelągowski,Practical assessment of the nature of business processes, Information Systems and e-Business Management</i> (<a href="pdf/Szelągowski 2021_Practical Assessment of the Nature of BPs.pdf">pdf</a>) or
<a href="https://doi.org/10.1007/s10257-021-00501-y">https://doi.org/10.1007/s10257-021-00501-y</a>
 
<p><h2>Getting started examples:</h2></p>

<div class="row">
	<div class="col-sm-4">
		<div class="h-100 content">
			<h3>Example<br>1</h3>
			<p>This <a href="bpnaf5.html?ex=example1">example</a> contains the questionnaire contatinng 23 sample processes.
It is prepared to be filled by an evaluator.
			</p>
		</div>
	</div>
 
	<div class="col-sm-4">
		<div class="h-100 content">
			<h3>Example<br>2</h3>
			<p>This <a href="bpnaf5.html?ex=example2">example</a> contains the questionnaire contatinng 19 sample processes.
It is partly filled by an evaluator.
			</p>
		</div>
	</div>

	<div class="col-sm-4">
		<div class="h-100 content">
			<h3>Example<br>3</h3>
			<p>
			This <a href="bpnaf5.html?ex=example3">example</a> contains the questionnaire contatinng 8 sample processes.
			It is already filled by an evaluator.
			</p>
		</div>
	</div>
</div>
	 
<p><h2>Functionality examples:</h2></p> 
  
<div class="row">
	<div class="col-sm-6">
		<div class="h-100 content">
			<h3>Importing files</h3>
			<p>The framework can open proprietary xlsx results files provided <b>N-1</b> sheet is saved as csv file. Here below there are examples of converted csv files as presented in the framework in preview mode (the questionnaire editing is disabled):
				<ul>
					<li><a href="bpnaf5.html?fx=csv/BPNAF -OBR.csv&enabled=0">BPNAF -OBR</a></li>
					<li><a href="bpnaf5.html?fx=csv/BPNAF -prod chemiczna.csv&enabled=0">BPNAF -prod chemiczna</a></li>
					<li><a href="bpnaf5.html?fx=csv/BPNAF -prod maszyn.csv&enabled=0">BPNAF -prod maszyn</a></li>
					<li><a href="bpnaf5.html?fx=csv/BPNAF -ubezpieczenia.csv&enabled=0">BPNAF -ubezpieczenia</a></li>
				</ul>
			</p>
			<p>Note that only final results with calculated knowledge intensity are available (without detailed answers of questionnaires statements). Additionally, there is the requirement for that data to have numbers in first column of data (only those rows are analysed by the internal converter).
			</p>
		</div>
	</div>

	<div class="col-sm-6">
		<div class="h-100 content">
			<h3>Report generation</h3>
			<p>The framework allows creating htmlized reports that can be later converted to pdf documents. The Report button is available in the multipurpose dialog that is accesible from title text "Business Process Nature Assessment Framework" of the <a href="bpnaf5.html">questionnaire page</a>. The report contains the process table with results and BPNAM charts. Here below you can find examples of reports in html and pdf versions generated from finished questionairies:
			<ul>
			<li>BPNAF -OBR:<br>&nbsp;&nbsp; 
				<a href="dat/csv/BPNAF -OBR.html">html</a>,	
				<a href="dat/csv/BPNAF -OBR.pdf">pdf</a>
			</li>
			<li>BPNAF -prod chemiczna:<br>&nbsp;&nbsp;  
				<a href="dat/csv/BPNAF -prod chemiczna.html">html</a>,
				<a href="dat/csv/BPNAF -prod chemiczna.pdf">pdf</a>
			</li>
			<li>BPNAF -prod maszyn:<br>&nbsp;&nbsp; 
				<a href="dat/csv/BPNAF -prod maszyn.html">html</a>,
				<a href="dat/csv/BPNAF -prod maszyn.pdf">pdf</a>
			</li>
			<li>BPNAF -ubezpieczenia:<br>&nbsp;&nbsp;  
				<a href="dat/csv/BPNAF -ubezpieczenia.html">html</a>,
				<a href="dat/csv/BPNAF -ubezpieczenia.pdf">pdf</a>
			</li>
			</ul>
		</div>
	</div>
</div> <!-- end of row -->

<p><h2>Operating activity:</h2></p>

<div class="row">
	<div class="col-sm-8">
		<div class="h-100 content">
			<h3>Questionnaire creation</h3>
			<p>The following form enables preparing a questionnaire that will be visible to dedicated users. After submiting it will generate the link to access it and redirects to this link. It its recommended to store the link from browser address bar. The link is a company and an evaluator dependent what allows for evaluating a company  by several experts.
			<form id='f7' action='bpnaf.php' method="post" onsubmit="return on_submit();">
				<input type="hidden" id="fx_name" name="fx_name" value="bpnaf_default.tsv">
				<input type="hidden" id="ex" name="ex" value="">
				
				<fieldset class="border rounded-3 p-3">
					<legend class="scheduler-border">Company Info:</legend>
					
<div class="row">
					<div class="col-7">
						<div class="input-group">
							<div class="input-group-text" title="Enter Company Name">Name:</div>
							<input type="text" id="CompanyName" class="form-control" list="CompanyHelpList" onchange="company_changed(this);">
							<datalist id="CompanyHelpList">
							</datalist>			
						</div>
					</div>

					<div class="col-5">
						<div class="input-group">
							<div class="input-group-text" title="Select Company Country">Country:</div>
							<select id="CompanyCountry" class="form-control">
							</select>
						</div>
					</div>
</div>
<div class="row">
					<div class="col-7">
						<div class="input-group">
							<div class="input-group-text" title="Select optionally industry group codename of the company">Industry:</div>
							<select id="Industry" class="form-select">
							  <option value="0"></option>
							  <option value="1">1</option>
							  <option value="2">2</option>
							  <option value="3">3</option>
							  <option value="4">4</option>
							  <option value="5" style="color:red">5</option>
							  <option value="6">6</option>
							  <option value="7">7</option>
							  <option value="8">8</option>
							  <option value="9">9</option>
							  <option value="10">10</option>
							  <option value="11">11</option>
							  <option value="12">12</option>
							  <option value="13">13</option>
							  <option value="14">14</option>
							  <option value="14">15</option>
							</select>
						</div>
					</div>
					<div class="col-5">
						<div class="input-group">
							<div class="input-group-text" title="Select optionally size group of the company">Size: </div>
							<select id="CompSize" class="form-select">
								<option value="0"></option>
								<option value="1">Micro (&lt; 10)</option>
								<option value="2">Small (11 - 50)</option>
								<option value="3">Medium (51 - 250)</option>
								<option value="4">Large (&gt; 250)</option>
							</select>
						</div>
					</div>
</div>
				</fieldset>
				<br>	
				<fieldset class="border rounded-3 p-3">
					<legend class="scheduler-border">Process Map Definition:</legend>
					<div class="mb-2">
						<div class="input-group">
							<div class="input-group-text" title="Select by clicking the radio button, choose the value from listbox and edit a name. After selecting new combination the name will be cleared. You do not need to enter again the name if you come back to select previous combination (only first is meaningful for further processing)!" >
								<font color="">Level N</font>&nbsp;
							</div>
							<div class="input-group-text" title="M - Management, C - Core, S - Support" >
								&nbsp;<input type="radio" name="MCS" value="M" checked onchange="mcs_changed(this);"/>&nbsp;M&nbsp;
								<select id="M" class="" style="width:40px" onchange="mcs_changed(this);">
									<option value="1">1</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5</option>
									<option value="6">6</option>
									<option value="7">7</option>
									<option value="8">8</option>
									<option value="9">9</option>
								</select>
								&nbsp;<input type="radio" name="MCS" value="C" onchange="mcs_changed(this);"/>&nbsp;C&nbsp;
								<select id="C" class="" style="width:40px" onchange="mcs_changed(this);" disabled>
									<option value="1">1</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5</option>
									<option value="6">6</option>
									<option value="7">7</option>
									<option value="8">8</option>
									<option value="9">9</option>
								</select>
								&nbsp;<input type="radio" name="MCS" value="S" onchange="mcs_changed(this);"/>&nbsp;S&nbsp;
								<select id="S" class="" style="width:40px" onchange="mcs_changed(this);" disabled >
									<option value="1">1</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5</option>
									<option value="6">6</option>
									<option value="7">7</option>
									<option value="8">8</option>
									<option value="9">9</option>
								</select>
								&nbsp;:
							</div>
							<input type="text" id="CategoryName" class="form-control" list="CategoryHelpList" value="">
<!--
							<datalist id="CategoryHelpList">
								<option value="M1 - ...">
								<option value="C1 - ...">
								<option value="S1 - ...">
							</datalist>			
-->		
						</div>
					</div>
					<div class="mb-2">
						<div class="input-group">
							<div class="input-group-text" title="Enter process N-1 level name in a edit field">Level N-1
							</div>
							<div class="input-group-text" title="Level N-1 code">
								&nbsp;&nbsp;&nbsp;<span id="ProcessCode"><font color="blue">M1</font>.1</span>:
							</div>
							<input type="text" id="ProcessName" class="form-control" list="ProcessHelpList"/>
							<datalist id="ProcessHelpList">
							</datalist>
						</div>
					</div>

					<button type="button" class="btn btn-info" title="Add the name of the process to the Process List" onclick="process_add(this);">Add</button>
					<button type="button" class="btn btn-warning" title="Delecte last process name from the Process List" onclick="process_del(this);" style="float:right">Delete</button>

					<legend class="scheduler-border">Process List:</legend>
					<textarea id='ex7' name="fx" wrap="off" rows=11 style="width:100%;font-family:Consolas,monospace"></textarea>
					
<div class="row">
					<div class="col-sm-8">
						 <div class="input-group">
							<div class="input-group-text" title="Evaluator Codename">Evaluator:</div>
							<input type="text" id="EvaluatorName" class="form-control" list="EvaluatorList" onchange="evaluator_add(this.value);" value="">
							<datalist id="EvaluatorList">
								<option value="1">
								<option value="2">
							</datalist>			
						</div>
					</div>
					<div class="col-sm-4">
						 <div class="input-group">
							<div class="input-group-text" title="language">Language:</div>
								<select class="form-select form-select-sm" id="lang" style="width:64px;display:right" onchange="lang_changed(this.value);">
									<option value="en">en</option>
									<option value="pl" selected>pl</option>
									<option value="es">es</option>
									<option value="de">de</option>
								</select>
							</div>
						</div>
					</div>
				    <div class="">
						<input type="submit" id="submit" value="Submit" class="btn btn-primary" style="float:right" disabled>
					</div>
</div>
				</fieldset>

			</form>
		</div>
	</div>	 
</div>  <!-- end of row -->

</div> <!-- end of container -->

<script>
	var bpnafname = "bpnaf"; // data files base name
	var bpnafphp = "bpnaf.php";
	var ext='.tsv';  // file format extension (tab separated)
	var datapath="dat/";   // data subdirectory
	var bom='\xef\xbb\xbf'; // utf-8 byte order mark

	// sample namess of processes as third field 
	var example1=`
	#;Przykładowa2 SA;Marek Oceniający;;;0;0.3;0.65;1
	M1.1;;Analiza rynkowa
	M1.2;;Rozwój strategii oraz wizji
	M2.1;;Monitorowanie i kontrola
	M2.2;;Zaprojektowanie usprawnień produktów
	C1.1;;Proces pozyskania klienta
	C1.2;;Proces tworzenia oferty
	C1.3;;Finalizacja
	C2.1;;Proces planowania projektowego
	C2.2;;Proces projektowania oraz produkcji oprogramowania
	C2.3;;Proces implementacji oprogramowania
	C3.1;;Monitoring
	C3.2;;Aktualizacje okresowe
	C3.3;;Naprawy oraz poprawki
	S1.1;;Rekrutacja
	S1.2;;Wprowadzenie do pracy
	S1.3;;Zmiany (Awanse, zmiana stanowiska, itp.)
	S1.4;;Wynagrodzenia oraz kontrakty
	S2.1;;Obsługa faktur
	S2.2;;Rozliczenia księgowe
	S2.3;;Dokumentacja księgowa
	S2.4;;Rozrachunki wg zamówień i konktraktów
	S3.1;;Tworzenie terminarzu projektu
	S3.2;;Oszacowanie oraz opracowanie kosztorysu
	S3.3;;Zdefiniowanie zakresu projektu
	S3.4;;Przydzielenie odpowiednich zasobów ludzkich
	S4.1;;Proces zamawainia nowego sprzętu IT
	S4.2;;Naprawda sprzętu IT
	S4.3;;Utrzymanie systemów wenątrz-firmowych
	S4.4;;Dystrubucja oraz zarządzanie sprzętem IT (Hardware oraz urządzenia pomocne)
	`;
	function enableTab(id) { 	// Enable the tab character onkeypress (onkeydown) inside textarea
		var el = document.getElementById(id);
		el.onkeydown = function(e) {
			if (e.keyCode === 9) { // tab was pressed
				var val = this.value,start = this.selectionStart,end = this.selectionEnd;
				this.value = val.substring(0, start) + '\t' + val.substring(end);
				this.selectionStart = this.selectionEnd = start + 1;
				return false;
			}
		};
	}
	enableTab("ex7");
	async function load_serverfile(file) {  // using fetch  (inserting datapath)
		var url = datapath + file;
		var response = await fetch(url,{cache: "reload"});
		var pr = await response.text();
		console.log("load_serverfile: "+pr);
		return(pr);
	}
	function company_changed(el) {
		var fname = bpnafname + "_" + el.value.replaceAll("&","_") + ext;
		console.log("Company changed: "+fname);
		load_serverfile(fname).then(s=>{
			console.log("then: "+s);
			if(s.length>0 && s[0]=='#') {
				document.getElementById("ex7").value=s;
				var ss = s.split('\n');
				var ss0 = ss[0].replace(/(\r\n|\n|\r)/gm, "").split(/[;\t]/);
				var n=0;
				n=1;document.getElementById("CompanyName").value = ss0.length>n && ss0[n].length>0 ? ss0[n]: '';
				n=2;document.getElementById("EvaluatorName").value = ss0.length>n && ss0[n].length>0 ? ss0[n]: '';
				n=12;document.getElementById("Industry").value = ss0.length>n && ss0[n].length>0 ? ss0[n] : '';
				n=13;document.getElementById("CompSize").value = ss0.length>n && ss0[n].length>0 ? ss0[n] : '';
				n=14;document.getElementById("CompanyCountry").value = ss0.length>n && ss0[n].length>0? ss0[n] : '';
			}
			update_mcs();
			document.getElementById('submit').disabled=false;
		}); 
	}
	function init_lists() {  
	//fill ProcessHelpList from example1 internal variable		
		var ss=example1.split("\n").slice(2,-2);
		var el=document.getElementById("ProcessHelpList");
		if(el) {
			for(var i=0;i<ss.length;i++) {
				var sss=ss[i].split(';');
				var option = document.createElement("option");  // creating candidate for new option
				option.value = sss[2];
				el.appendChild(option);
			}
		}
	//fill CompanyHelpList from server directory
		url = bpnafphp +"?fx=.";  // url for getting list of data directory
		fetch(url, {cache:"reload"})
		.then(response => {return response.text();})
		.then(s => {
			ss=s.match(/bpnaf_(.)+\.tsv/gi);                     // match bpnaf_*.tsv files
			var el2=document.getElementById("CompanyHelpList");
			for(var i=0;i<ss.length;i++) {
				var option = document.createElement("option");   // creating new option
				option.value = ss[i].slice(6,-4).replace("_","&");
				el2.appendChild(option);
			}
		})
		mcs_changed(document.getElementsByName("MCS")[0]);  // update mcs code
	//fill Company Country list from var countryListAlpha2 bpnaf.js
		var ss=countryListAlpha2;
		var el=document.getElementById("CompanyCountry");
		if(el && ss!=undefined) {
			for(var i in ss) {
				var option = document.createElement("option");  // creating candidate for new option
				option.value = i;
				option.innerHTML = ss[i];
				//if(i==="PL") option.selected=true;
				el.appendChild(option);
			}
		}
	}
	function mcs_changed(el) {  // letter and number component handler for radio and select
		var mcs = el.value; // letter component
		var nn = '';  // number component
		if("MCS".indexOf(mcs)>-1) {  // letter component selected
			nn = document.getElementById(mcs).value;
			document.getElementById('M').setAttribute("disabled","disabled");
			document.getElementById('C').setAttribute("disabled","disabled");
			document.getElementById('S').setAttribute("disabled","disabled");
			document.getElementById(mcs).removeAttribute("disabled");  // reenable current
		} else {    // number component selected
			nn = el.value;
			mcs = get_mcs();
		}
		var el2 = document.getElementById("ProcessCode");
		if(el2) {
			el2.innerHTML=get_next(mcs,nn);
		}
		document.getElementById('CategoryName').value='';  // clear CategoryName
	}
	function update_mcs() {
		mcs=get_mcs();	// update mcs
		var mcs_no=document.getElementById(mcs).value;   // MCS number
		var el = document.getElementById("ProcessCode"); // span element
		if(el) {
			el.innerHTML=get_next(mcs,mcs_no);
		} 				
	}
	function process_del(e) {
		var ta = document.getElementById("ex7");  // update textarea
		var ss = ta.value.split('\n');
		if(ss[ss.length-1].length<2) ss=ss.slice(0,-1);
		ta.value = ss.slice(0,-1).join('\n')+'\n';
		update_mcs();
	}
	function evaluator_add(s) {
		var ta = document.getElementById("ex7");
		var ss = ta.value.split('\n');
		var ss2 = ss[0].split(/[;\t]/);
		ss2[0]='#';
		ss2[1]=document.getElementById("CompanyName").value.split(';')[0];
		ss2[2]=s;
		ss[0]=ss2.join(';');
		ta.value=ss.join('\n');
	}
	function get_next(mcs,nn) {
		var ta = document.getElementById("ex7");
		var s = ta.value;
		var ss=s.split('\n');
		//s = ss.slice(s[0]==='#'?1:0).join('\n');
		var hd='',no='1';
		for(var i=0;i<ss.length;i++) {
			var t=ss[i].split('.');
			var n=t[0].substring(1);
			if(ss[i][0]===mcs && n===nn) {
				no=1+parseInt(t[1]);
			}
		}
		s = "<font color='blue'>" + mcs + nn + '.' + "</font>" + no;
		return(s);
	}
	function get_mcs() {
		var el=document.getElementsByName("MCS");  // MCS Radio
		var mcs='';
		for(var k=0;k<el.length;k++) {
			if(el[k].checked) {
				mcs="MCS"[k];
				break;
			}
		}
		return(mcs);
	}	
	function process_add(e) {
		var el=document.getElementById("CompanyName");  // Company Name
		var company = el ? el.value : '';
		var ev = '';
		var s = company.split(";");					// Check evaluator info
		if(s.length>1) {company=s[0];ev=s[1];}
		
		var el=document.getElementById("Industry"); // Industry
		var industry =  el ? el.value : '';
		var el=document.getElementById("CompSize"); // Company Size
		var compsize =  el ? el.value : '';
		var el=document.getElementById("CompanyCountry"); // Company Size
		var compcountry =  el ? el.value : '';
		
		mcs=get_mcs();	
		//console.log("mcs : " + mcs);
		var mcs_no=document.getElementById(mcs).value;   // MCS number
		var mcs_name = document.getElementById("CategoryName").value;  
/*		
		var el = document.getElementById("CategoryName");
		var mcs = el.value[0]; // el.options[el.selectedIndex].text[0]; //var val = e.value[0];
		var category = el.value[1]; // el.options[el.selectedIndex].text[0]; //var val = e.value[0];
		var categoryname = el.value.substring(el.value[3]!=='-' ? 3 : 5);
		var el2 = document.getElementById("CategoryHelpList");
		var option=null;
	    for (var i = 0; i < el2.children.length; i++) {
	      if (el2.children[i].value[0]===mcs && el2.children[i].value[1] === category) {
			  el2.children[i].value = el.value;
	          option = document.createElement("option");  // creating candidate for new option
	          option.value = mcs+(1+parseInt(category))+" - ...";
	      	  break;
	      }
	    }
		var isneeded = true;
	    for (var i = 0; i < el2.children.length; i++) { // checking if adding is needed
  	      if (el2.children[i].value[0]===mcs && parseInt(el2.children[i].value[1]) == 1+parseInt(category) ) {
			  isneeded=false; // it already exists
			  break;
		  }
		}
		if(option!=null && isneeded) {
        	el2.appendChild(option);
		}
*/				
		var el = document.getElementById("ProcessName");
		if(el) {
			var ta = document.getElementById("ex7");
			var s = ta.value;
			var ss=s.split('\n');
			s = ss.slice(s[0]==='#'?1:0).join('\n');
			var hd='',no='1';
			if(s[0]!='#') hd='#;'+company+';'+ev+';;;;;0;0.3;0.65;1;;'+industry+';'+compsize+';'+compcountry+'\n';
			for(var i=0;i<ss.length;i++) {
				var t=ss[i].split('.');
				var n=t[0].substring(1);
				if(ss[i][0]===mcs && n===mcs_no) {
					no=1+parseInt(t[1]);
				}
			}
			s += mcs + mcs_no + '.' + no + ';' + mcs_name + ';' +  el.value+'\n';
			ta.value = hd + s ; 
			el.value='';
		}
		var el = document.getElementById("ProcessCode"); // span element
		if(el) {
			el.innerHTML=get_next(mcs,mcs_no);
		} 
		document.getElementById('submit').disabled=false;
	}
	function on_submit() {
		var company = document.getElementById("CompanyName").value;
		if(company.includes(";")) {
			company=company.split(/[;\t]/)[0];
		}
		company = company!=='' ? company.replaceAll("&","_") : "default";
		var evaluator = document.getElementById("EvaluatorName").value;
		if(evaluator.length>0) company += ';'+evaluator;
		var fname = bpnafname+"_" + company + ext;	
		var lang=document.getElementById("lang").value;
		fname += "&lang="+lang;
		fname = "uu"+btoa(encodeURIComponent("fx="+fname));
		document.getElementById("fx_name").value=fname;
		var s = document.getElementById('ex7').value;
		 var ss=s.split('\n');                          // sorting MCS
		 if(ss.length<=2) {document.getElementById("submit").disabled=true;return(false);}
		 var s1=ss.shift();  // first is header line
		 var sn=ss.pop();    // last is empty line
		 for(var i=ss.length-1;i>=0;i--) {
			 if(ss[i].length>0 && ss[i][0] !='#') {
				 if(ss[i][0]=='C') ss[i]='N'+ss[i].substring(1);
			 } else {
				 ss.splice(i,1);
			 }
		 }
		 ss=ss.sort();
		 for(var i=0;i<ss.length;i++) {if(ss[i][0]=='N') ss[i]='C'+ss[i].substring(1);}
		 ss.unshift(s1);
		 ss.push(sn);
		 s=ss.join('\n');
		document.getElementById('ex7').value=s;
		
		var s2 = '\nCompany-Evaluator Code: '+company + '\nEvaluator: '+evaluator + '\nLanguage: '+lang +'\n'; //ss.join('\n');
		if(window.location.protocol==="file:" || document.location.hostname.includes(".github.io")) {
			if(document.location.hostname.includes(".github.io")) { 
				document.getElementById('f7').method = "get";
				document.getElementById('ex').value = encodeURIComponent(s.replaceAll('\n','|'));
				document.getElementById('fx_name').value = "";
				document.getElementById('f7').action = "bpnaf5.html";
			} else {
				document.getElementById('f7').action = 
					'bpnaf5.html?ex='+encodeURIComponent(s.replaceAll('\n','|'))+"&lang="+lang;
			}
			s2='\nDo you want to open generated process map?\n'+s2+'\n';			
		} else {
			s2='\nDo you want to submit?\n'+s2+'\nLink code:\n'+fname+'\n';
		}
		return(confirm(s2));
	}
	init_lists();
	
</script>

</body>

</html>


<!--
<div class="col-sm-6">
	<div class="h-100 content">
		<h3>Example<br>4</h3>
		<p>Execute <a href="bpnaf5.html">framework</a> form without any input data what allows for continuing previous session.
		<p>Each session could be also stored in a local file by copying to clipboard with Ctrl-C keyboard shortcut and than pasting to favorite notepad like editor (a paste could be also performed inside Excel-like spredsheet). This allows for storing edited questionnaire data in a simple text file. The text files could be entered later into fromework by clicking on the title of the page, selecting file from local disk in the dialog box (what loads file content into textarea) and then clicking 'Open' button. When clicking 'Open' button the old content is copied to the clipboard (what allows for later manual undo with a help of the textarea).  
	</div>
</div>
-->


<!--
<p><h2>Internal file format playground:</h2></p>

<div class="col-sm-6">
	<div class="h-100 content">
		<h3>Example<br>4</h3>
		<p>This minimum working example contains a simple questionnaire definition file you can extend manually and than start filling. The definition file contains semicolon (or tab) separated lines. The first line must start with '#' character and contains company name filed and the evaluator name. Next lines contains process N-1 sublevel code (should start from M for managment processes, C for core processes or S for support processes) and process name in the third field of each line.   
		<form id='f1' action='' method="post">
			<textarea id='ex' wrap="off" rows=10 style="width:100%;font-family:Consolas,monospace">#;Fx;Ev
M1.1;;Proces1
C1.1;;Proces2</textarea>
			<input type="submit" value="Start" class="btn btn-primary" style="float:right" onclick="document.getElementById('f1').action='bpnaf5.html?ex='+encodeURIComponent(document.getElementById('ex').value.replaceAll('\n','|'));">
		</form>
		</p>
	</div>
</div>

		 
<div class="col-sm-6">
	<div class="h-100 content">
		<h3>Example<br>6</h3>
		<p>The following form enables preparing an example that will be visible here for all users. After submiting it will be available at the server location with a ending <a href="bpnaf5.html?ex=example6">bpnaf5.html?ex=example6</a>. Keep in mind that as this example maybe changed by any user it may contain erroneous data. 
		<form id='f2' action='bpnaf.php' method="post">
			<input type="hidden" name="ex_name" value="example6">
			<textarea id='ex6' name="ex" wrap="off" rows=11 style="width:100%;font-family:Consolas,monospace">#;MyCompany;Me
M1.1;;Process 1
M1.2;;Process 2
M1.3;;Process 3
C1.1;;Process 4
C1.3;;Process 5
S1.1;;Process 6</textarea>
			<input type="submit" value="Submit" class="btn btn-primary" style="float:right">     
		</form>
		</p>
	</div>
</div>

-->
